{% extends "base.html" %}

{% block title %}Ver Contrato{% endblock %}

{% block content %}
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
    }

    .section-title {
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 0.75rem;
        color: #2c3e50;
    }

    .info-block {
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 0.5rem;
        margin-bottom: 1rem;
    }

    .info-icon {
        margin-right: 0.4rem;
        color: #0d6efd;
    }

    .img-fixed {
        width: 100%;
        max-width: 400px;
        height: 400px;
        object-fit: cover;
        border-radius: 0.5rem;
        border: 2px solid #dee2e6;
    }

    .row-info {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .col-info {
        flex: 1 1 45%;
    }

    .col-info p {
        margin-bottom: 0.4rem;
    }
</style>

<div class="container mt-5">
    <h2 class="text-primary mb-4">Detalle del Contrato</h2>

    {% if contrato %}
    <div class="card shadow border-0">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-person-badge-fill me-2"></i>Contrato: {{ contrato.numero_contrato }}</h5>
        </div>
        <div class="card-body">
            {% if contrato.imagen_domicilio %}
            <div class="text-center mb-4">
                <img src="{{ url_for('static', filename='uploads/' ~ contrato.imagen_domicilio) }}"
                     alt="Imagen del domicilio" class="img-fluid img-fixed">
            </div>
            {% endif %}

            <div class="info-block">
                <div class="section-title"><i class="bi bi-person-vcard info-icon"></i>Datos Personales</div>
                <div class="row-info">
                    <div class="col-info">
                        <p><strong>Nombre:</strong> {{ contrato.nombres }} {{ contrato.apellidos }}</p>
                        <p><strong>Cédula:</strong> {{ contrato.cedula }}</p>
                    </div>
                    <div class="col-info">
                        <p><strong>Teléfono:</strong> {{ contrato.telefono }}</p>
                        <p><strong>Email:</strong> {{ contrato.email }}</p>
                    </div>
                </div>
            </div>

            <div class="info-block">
                <div class="section-title"><i class="bi bi-geo-alt info-icon"></i>Ubicación</div>
                <div class="row-info">
                    <div class="col-info">
                        <p><strong>Dirección:</strong> {{ contrato.direccion }}</p>
                        <p><strong>País:</strong> {{ contrato.pais }}</p>
                        <p><strong>Provincia:</strong> {{ contrato.provincia }}</p>
                    </div>
                    <div class="col-info">
                        <p><strong>Cantón:</strong> {{ contrato.canton }}</p>
                        <p><strong>Latitud:</strong> {{ contrato.latitud }}</p>
                        <p><strong>Longitud:</strong> {{ contrato.longitud }}</p>
                    </div>
                </div>
            </div>

            <div class="info-block">
                <div class="section-title"><i class="bi bi-wifi info-icon"></i>Detalles del Servicio</div>
                <div class="row-info">
                    <div class="col-info">
                        <p><strong>Plan de Internet:</strong> {{ contrato.plan_internet }}</p>
                        <p><strong>IP Asignada:</strong> {{ contrato.ip_asignada }}</p>
                    </div>
                    <div class="col-info">
                        <p><strong>Máscara:</strong> {{ contrato.mascara }}</p>
                        <p><strong>Gateway:</strong> {{ contrato.gateway }}</p>
                        <p><strong>Estado:</strong>
                            {% if contrato.estado == 'Activo' %}
                                <span class="badge bg-success">{{ contrato.estado }}</span>
                            {% elif contrato.estado == 'Cortado' %}
                                <span class="badge bg-danger">{{ contrato.estado }}</span>
                            {% else %}
                                <span class="badge bg-secondary">{{ contrato.estado }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>

            <div class="info-block">
                <div class="section-title"><i class="bi bi-calendar3 info-icon"></i>Fechas</div>
                <div class="row-info">
                    <div class="col-info">
                        <p><strong>Inicio:</strong> {{ contrato.fecha_inicio or 'No registrada' }}</p>
                        <p><strong>Corte:</strong> {{ contrato.fecha_corte or 'No registrada' }}</p>
                    </div>
                    <div class="col-info">
                        <p><strong>Suspensión:</strong> {{ contrato.fecha_suspension or 'No registrada' }}</p>
                        <p><strong>Finalización:</strong> {{ contrato.fecha_fin or 'No registrada' }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-footer text-end">
            <a href="/clientes" class="btn btn-outline-secondary btn-sm me-2">
                <i class="bi bi-arrow-left"></i> Volver
            </a>
            <a href="/clientes/editar/{{ contrato.id }}" class="btn btn-outline-primary btn-sm me-2">
                <i class="bi bi-pencil"></i> Editar
            </a>
            <form method="post" action="/clientes/eliminar/{{ contrato.id }}" class="d-inline" onsubmit="return confirm('¿Está seguro de eliminar este cliente?');">
                <button type="submit" class="btn btn-outline-danger btn-sm">
                    <i class="bi bi-trash"></i> Eliminar
                </button>
            </form>
        </div>
    </div>
    {% else %}
    <div class="alert alert-warning">Contrato no encontrado.</div>
    {% endif %}
</div>
{% endblock %}
