# Limpia la configuraci칩n anterior (opcional, si est치s empezando de cero)
/system reset-configuration no-defaults=yes skip-backup=yes

# Espera que reinicie, luego vuelves a conectar y ejecutas lo siguiente:

# Puerto ether1 como WAN (obtener IP autom치tica)
/ip dhcp-client add interface=ether1 disabled=no

# Asignar IP local al bridge
/interface bridge add name=bridge1
/interface bridge port add interface=ether2 bridge=bridge1
/interface bridge port add interface=ether3 bridge=bridge1
/interface bridge port add interface=ether4 bridge=bridge1
/interface bridge port add interface=ether5 bridge=bridge1
/ip address add address=192.168.88.1/24 interface=bridge1

# Servidor DHCP para LAN
/ip pool add name=dhcp_pool ranges=192.168.88.10-192.168.88.254
/ip dhcp-server add address-pool=dhcp_pool interface=bridge1 name=dhcp1
/ip dhcp-server network add address=192.168.88.0/24 gateway=192.168.88.1
/ip dhcp-server enable dhcp1

# NAT para dar salida a internet a la LAN
/ip firewall nat add chain=srcnat action=masquerade out-interface=ether1

# Habilitar API para conectarte desde Python
/ip service enable api
/ip service set api port=8728

# Habilitar acceso Winbox, Web, SSH (opcional)
/ip service enable winbox
/ip service enable www
/ip service enable ssh

# Habilitar el servidor PPPoE en la interfaz WAN
/interface pppoe-server server
add service-name=PPPoE-ISP interface=ether1 disabled=no one-session-per-host=yes

# Crear perfiles PPPoE (planes)
/ppp profile
add name=PLAN_2M local-address=10.0.0.1 remote-address=pool_2M rate-limit=2M/2M
add name=PLAN_5M local-address=10.0.0.1 remote-address=pool_5M rate-limit=5M/5M
add name=PLAN_10M local-address=10.0.0.1 remote-address=pool_10M rate-limit=10M/10M

# 游댳 Crear pools de IP
/ip pool
add name=pool_2M ranges=10.0.2.2-10.0.2.254
add name=pool_5M ranges=10.0.5.2-10.0.5.254
add name=pool_10M ranges=10.0.10.2-10.0.10.254
add name=pool_20M ranges=10.0.20.2-10.0.20.254

# 游댳 Crear perfiles PPPoE asociados a cada pool
/ppp profile
add name="Plan B치sico" rate-limit="10M/2M" local-address=10.0.2.1 remote-address=pool_2M
add name="Plan Hogar" rate-limit="20M/5M" local-address=10.0.5.1 remote-address=pool_5M
add name="Plan Avanzado" rate-limit="50M/10M" local-address=10.0.10.1 remote-address=pool_10M
add name="Plan Full" rate-limit="100M/20M" local-address=10.0.20.1 remote-address=pool_20M

/interface pppoe-server server
add disabled=no interface=bridge1 service-name=service1
add disabled=no interface=ether1 one-session-per-host=yes service-name=PPPoE-ISP
add authentication=pap,chap disabled=no interface=bridge1 service-name=pppoe-server1

